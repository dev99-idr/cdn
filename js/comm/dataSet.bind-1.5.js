DataSet.Bind=function(t){this.dataSet=t,this.objs=[],this.isDrow=!0},DataSet.Bind.prototype={add:function(t,e){var i=null;if(void 0===t)throw"객체가 올바르게 지정되지 않았습니다.";for(var a=0;a<this.objs.length;a++)if(this.objs[a].equals(t))return;for(var o in DataSet.Bind)try{if(DataSet.Bind[o].isBind(t)){i=new DataSet.Bind[o](t,this.dataSet,e);break}}catch(n){(console||{log:function(){}}).log(n)}if(null==i)throw"해당 객체에 대한 Bind가 존재 하지 않습니다.";this.objs.push(i),i.attach(),i.drow()},remove:function(t){for(e=0;e<this.objs.length&&this.objs[e].obj!=t;e++);if(this.objs.length!=e){var e;this.objs[e].detach(),this.objs.remove(e,e)}},drow:function(t){for(var e=this.objs,i=0;i<e.length;i++)e[i].drow(t)},sort:function(t){for(var e=this.objs,i=0;i<e.length;i++)e[i].sort&&e[i].sort(t)},posDrow:function(t,e,i,a){if(!1!=this.isDrow){this.isDrow=!1;var o=this.objs;try{for(var n=0;n<o.length;n++)new Date().getTime(),o[n].posDrow(t,e,i,a)}catch(s){}this.isDrow=!0}},posAdd:function(t,e,i){for(var a=this.objs,o=0;o<a.length;o++)a[o].posAdd(t,e,i)},posDel:function(t,e){for(var i=this.objs,a=0;a<i.length;a++)i[a].posDel(t,e)},saveRows:function(){for(var t=this.objs,e=0;e<t.length;e++)(t[e]instanceof DataSet.Bind.Grid||t[e]instanceof DataSet.Bind.SlickGrid)&&t[e]._setSave()}},DataSet.Bind.Grid=function(t,e,i){if(this.grid=this.obj=t,this.dataSet=e,this.editRowId=null,this._oldRowId=null,this._curPage=1,this.emptyBox=null,this.option={isEmptyText:!0,emptyText:"There is no data",editType:"doubleClick"},void 0!==i)for(var a in i)this.option[a]=i[a];this.emptyBox=$('<div style="width: 100%; text-align: center; padding-top: 20px;">'+this.option.emptyText+"</div>"),this._onSelectRow=null,this._onCellSelect=null,this._ondblClickRow=null,this._afterSaveCell=null,this._onPaging=null},DataSet.Bind.Grid.isBind=function(t){return"function"==typeof t.jqGrid},DataSet.Bind.Grid.prototype={equals:function(t){try{return this.obj.get(0)==t.get(0)}catch(e){return!1}},attach:function(){var t=this.grid,e=this,i=t.jqGrid("getGridParam"),a=this._onSelectRow=i.onSelectRow,o=this._onCellSelect=i.onCellSelect,n=this._ondblClickRow=i.ondblClickRow,s=this._afterSaveCell=i.afterSaveCell,r=this._onPaging=i.onPaging;this._oldRowId=null,"cellClick"==this.option.editType&&t.jqGrid("setGridParam",{cellEdit:!0,cellsubmit:"clientArray"});var l={onSelectRow:function(t,o,n){var s=i.selarrrow;if(i.multiselect){if(s.indexOf(t)>-1)e._setDataPosition(t,o,n);else if(-1==s.indexOf(t)&&s.length>0)e._setDataPosition(s[0]);else{if(!(0==s.length&&e.dataSet.getPosition()>-1))return;e.dataSet.setPosition(-1)}void 0!==a&&null!=a&&a(t,o,n)}else{if(e._oldRowId==t)return;e._oldRowId=t,"cellClick"!=e.option.editType&&e._setDataPosition(t),void 0!==a&&null!=a&&a(t,o,n)}},onPaging:function(i){e._curPage=t.jqGrid("getGridParam","page"),void 0!==r&&null!=r&&r(i)}};"cellClick"==this.option.editType?(l.afterSaveCell=function(t,i,a,o,n){e._setCellSave(t,i,a),void 0!==s&&null!=s&&s(t,i,a,o,n)},l.onCellSelect=function(t,i,a,n){if(e._oldRowId==t){void 0!==o&&null!=o&&o(t,i,a,n);return}e._setDataPosition(t),void 0!==o&&null!=o&&o(t,i,a,n)}):"doubleClick"==this.option.editType?(l.ondblClickRow=function(t,i,a,o){"doubleClick"==e.option.editType&&e._setEditable(t,i,a,o),void 0!==n&&null!=n&&n(t,i,a,o)},l.onCellSelect=function(t,i,a,n){this.editRowId!=t&&e._setSave(),void 0!==o&&null!=o&&o(t,i,a,n)}):"onClick"==this.option.editType&&(l.onCellSelect=function(t,i,a,n){this.editRowId!=t&&e._setSave(),"onClick"==e.option.editType&&e._setEditable(t),void 0!==o&&null!=o&&o(t,i,a,n)}),t.jqGrid("setGridParam",l)},detach:function(){var t=this._onSelectRow,e=this._onCellSelect,i=this._ondblClickRow,a=this._afterSaveCell,o=this._onPaging;grid.jqGrid("setGridParam",{onSelectRow:t,onCellSelect:e,ondblClickRow:i,afterSaveCell:a,onPaging:o}),this.grid=null,this.dataSet=null,this.editRowId=null,this._oldRowId=null,this._onSelectRow=null,this._ondblClickRow=null,this._afterSaveCell=null,this._onPaging=null},drow:function(t){var e=this.grid,i=this.dataSet.view();this.dataSet;var a=this;this.isdrow=!1,this.count=void 0===this.count?0:this.count,this._oldRowId=null,new Date().getTime(),e.parent().parent().find(this.emptyBox).remove(),e.clearGridData(),e.removeData(),this._showEmptyBox(),e.data("nextVal",1),a.isdrow=!0;for(var o=[],n=0;n<i.length;n++){if(!1==a.isdrow)return;e.data(""+e.data("nextVal"),i[n]),o.push($.extend(i[n].get(),{hiddenRowId:""+e.data("nextVal")})),e.data("nextVal",e.data("nextVal")+1)}e.jqGrid("addRowData","hiddenRowId",o),""==e.jqGrid("getGridParam","pager")||t?(""!=e.jqGrid("getGridParam","pager")&&t&&(a._curPage=1,e.jqGrid("setGridParam","page",a._curPage),e.jqGrid("setGridParam").trigger("reloadGrid")),a._setPosition()):(e.jqGrid("setGridParam","page",a._curPage),e.jqGrid("setGridParam").trigger("reloadGrid"))},posDrow:function(t,e,i){var a=this.grid,o=a.jqGrid("getGridParam");if(void 0===e){if(t<0)this._oldRowId=null,a.jqGrid("setSelection",null);else{var n=this.dataSet.view()[t],s=a.data();for(var r in s)if(s[r]==n&&this.editRowId!=r){var l=o.selarrrow;o.multiselect&&-1==l.indexOf(r)?a.jqGrid("setSelection",r):o.multiselect||a.jqGrid("setSelection",r),a.jqGrid("setRowData",r,n.get());return}}}else{var n=this.dataSet.view()[t],s=a.data(),r=null;for(r in s)if(s[r]==n)break;i=""===i?null:i,a.jqGrid("setCell",r,e,i)}},posAdd:function(t,e,i){var a=this.grid,o=a.data();if(this._showEmptyBox(),void 0===i){a.data(""+a.data("nextVal"),e),a.jqGrid("addRowData",a.data("nextVal"),e.get()),a.data("nextVal",a.data("nextVal")+1);return}for(var n in o)o[n]==i&&this.editRowId!=n&&(a.data(""+a.data("nextVal"),e),a.jqGrid("addRowData",a.data("nextVal"),e.get(),n),a.data("nextVal",a.data("nextVal")+1))},posDel:function(t,e){var i=this.grid,a=i.data();for(var o in this._showEmptyBox(),a)if(a[o]==e){var n=i.jqGrid("getGridParam"),s=n.iCol,r=n.iRow;"cellClick"==this.option.editType&&i.jqGrid("restoreCell",r,s),i.jqGrid("delRowData",o);break}},_showEmptyBox:function(){var t=this.grid,e=this.dataSet.view(),i=this.option.isEmptyText;t.parent().parent().find(this.emptyBox).remove(),e.length<1&&i&&t.parent().parent().append(this.emptyBox)},_setDataPosition:function(t,e,i){this._setPosition(t)},_setEditable:function(t,e,i,a){var o=this,n=this.grid;this.editRowId=t,n.jqGrid("editRow",t,{keys:!0,url:"clientArray",aftersavefunc:function(t,e,i){o._setSave()}})},_setCellSave:function(t,e,i){var a=this.grid,o=this.dataSet,n=this.dataSet.view(),s=a.data(t),r=n.indexOf(s);o.set(r,e,i)},_setSave:function(){var t=this.grid,e=this.dataSet,i=this.dataSet.view(),a=this.editRowId;if(this.editRowId=null,"cellClick"==this.option.editType){var o=t.jqGrid("getGridParam"),n=o.iCol,s=o.iRow;try{t.jqGrid("saveCell",s,n)}catch(r){}}else{if(null==a)return;t.jqGrid("saveRow",a,{url:"clientArray"});var l=t.jqGrid("getRowData",a),d=t.data(a);for(var h in l)d.set(h,l[h]);e._binder.posDrow(i.indexOf(d))}},_setPosition:function(t){var e=this.grid,i=this.dataSet,a=this.dataSet.view(),o=void 0===t?e.getGridParam("selrow"):t,n=e.jqGrid("getGridParam");if(this.editRowId==t||n.multiselect||this._setSave(),null==o)i.setPosition(-1);else{var s=e.data(o);i.getPosition()!=a.indexOf(s)&&i.setPosition(a.indexOf(s))}}},DataSet.Bind.Form=function(t,e){this.form=this.obj=t,this.dataSet=e,this.elms=[],this.isDrow=!1},DataSet.Bind.Form.isBind=function(t){return void 0!==t.tagName&&"form"==t.tagName.toLowerCase()},DataSet.Bind.Form.prototype={equals:function(t){return this.obj==t},attach:function(){for(var t=this.form,e=t.getElementsByTagName("input"),i=t.getElementsByTagName("textarea"),a=t.getElementsByTagName("select"),o=this.elms=[],n=this,s=0;s<e.length;s++)"button"!=e[s].type&&o.push(e[s]);for(var s=0;s<a.length;s++)o.push(a[s]);for(var s=0;s<i.length;s++)o.push(i[s]);$(this.form).find("input, select, textarea").change(function(t){n._changedValue(t)})},detach:function(){for(var t=this,e=this.elms,i=0;i<e.length;i++)tagName=e[i].tagName.toLowerCase(),elmNm=(elm=e[i]).name;$(this.form).find("input, select, textarea").unchange(function(e){t._changedValue(e)}),this.form=null,this.dataSet=null,this.elms=null},drow:function(){var t,e,i,a=this.elms,o=this.dataSet.getPosition(),n=[];this.isDrow=!0;try{i=this.dataSet.get(o)}catch(s){i=null,this.form.reset();return}for(var r in i)n.push(r);for(var l=0;l<a.length;l++)tagName=a[l].tagName.toLowerCase(),e=(t=a[l]).name,0>n.indexOf(e)||(null!=i?this._setValue(t,i[e]):this._setValue(t,""));this.isDrow=!1},posDrow:function(t,e,i){var a,o,n=this.elms,s=this.dataSet.getColumns();if(this.isDrow=!0,void 0===e){if(void 0===t||1>this.dataSet.size()){this.isDrow=!1;return}t<0&&(t=0);var r=this.dataSet.get(t);if(null!=s)for(var l=0;l<s.length;l++)for(var d=s[l].key,n=$(this.form).find("[name='"+d+"']"),h=0;h<n.length;h++)this._setValue(n[h],r[d]);else{for(var e in s=[],r)s.push(e);for(var l=0;l<n.length;l++)o=(a=n[l]).name,this._setValue(a,r[o])}}else for(var n=$(this.form).find("[name='"+e+"']"),l=0;l<n.length;l++)this._setValue(n[l],i);this.isDrow=!1},posAdd:function(t,e){},posDel:function(t,e){},_changedValue:function(t){if(null!=this.form&&!this.isDrow){var e=t.target,i=this.dataSet.getPosition(),a=e.value,o=e.name,n=e.type.toLowerCase();if(!(i<0)){if(!1!=this.dataSet.get(i).hasOwnProperty(o)){if("select"==t.target.tagName.toLowerCase()){for(var s=[],r=t.target.options,l=0;l<r.length;l++)r[l].selected&&s.push(r[l].value);this.dataSet.set(i,o,s.toString())}else if("checkbox"!=n&&"radio"!=n){if(this.dataSet.get(i,o)==a)return;if(e.getAttribute("data-format")){var d=$("<input>").val(a).mask(e.getAttribute("data-format").replace(/[^9a*]/g,""));a=d.val(),d.trigger("unmask").remove()}this.dataSet.set(i,o,a)}else{for(var s=[],l=0;l<this.elms.length;l++)this.elms[l].name==o&&this.elms[l].checked&&s.push(this.elms[l].value);this.dataSet.set(i,o,s.toString())}}}}},_setValue:function(t,e){var i=t.tagName.toLowerCase();if("select"==i&&t.multiple){for(var a=e.split(","),o=t.options,n=0;n<o.length;n++){o[n].selected=!1;for(var s=0;s<a.length;s++)a[s]==o[n].value&&(o[n].selected=!0)}$(t).trigger("change")}else if("select"==i){var r=t.selectedIndex;gf_SelectedValue(t,e),r!=t.selectedIndex&&$(t).trigger("change")}else if("radio"==t.type){if(t.checked==(t.value==e))return;t.checked=t.value==e,t.checked&&$(t).trigger("change")}else if("checkbox"==t.type){var a=e.split(",");if(t.checked==a.indexOf(t.value)>-1)return;t.checked=a.indexOf(t.value)>-1,t.checked&&$(t).trigger("change")}else{if(t.value===e)return;if(t.getAttribute("data-format")){var l=$("<input>").val(e).mask(t.getAttribute("data-format"));e=l.val(),l.trigger("unmask").remove()}t.value=void 0===e?"":e,$(t).trigger("change")}}},DataSet.Bind.Select=function(t,e,i){this.select=this.obj=t,this.dataSet=e,this.option=i},DataSet.Bind.Select.isBind=function(t){return void 0!==t.tagName&&"select"==t.tagName.toLowerCase()},DataSet.Bind.Select.prototype={equals:function(t){return this.obj==t},attach:function(){},detach:function(){this.select=null,this.dataSet=null,this.option=null},drow:function(){var t,e,i=this.option.val,a=this.option.text,o=this.option.defaultIndex||0,n=this.select.options;n.length=0;for(var s=0;s<this.dataSet.size();s++){t=this.dataSet.get(s,i),e=this.dataSet.get(s,a);var r=new Option(e,t);n.add(r)}this.select.selectedIndex=o},posDrow:function(t,e,i){var a,o,n,s=this.option.val,r=this.option.text;t<0||((n=this.select.options[t]).selected=!0,void 0===e&&t>-1?(a=this.dataSet.get(t,s),o=this.dataSet.get(t,r),n.value=a,n.text=o):s==e?n.value=i:r!=e||(n.text=i))},posAdd:function(t,e){var i,a,o=this.option.val,n=this.option.text,s=new Option;t<0||(this.select.options.add(s,t),i=this.dataSet.get(t,o),a=this.dataSet.get(t,n),s.value=i,s.text=a)},posDel:function(t,e){this.select.remove(t)}},DataSet.Bind.SlickGrid=function(t,e,i){this.grid=this.obj=t,this.dataSet=e},DataSet.Bind.SlickGrid.isBind=function(t){try{if("2.1"==t.slickGridVersion)return!0}catch(e){}return!1},DataSet.Bind.SlickGrid.prototype={equals:function(t){try{return this.obj.get(0)==t.get(0)}catch(e){return!1}},attach:function(){var t=this.grid,e=this.dataSet,i=this,a=$(t.getContainerNode()).data("grid_copy_manager");t.onClick.subscribe(function(t,e){}),t.onSelectedRowsChanged.subscribe(function(t,e,a,o,n){i._setPosition(e.rows[0]),i._oldRowId=e.rows[0]}),t.onActiveCellChanged.subscribe(function(t,e){}),t.onBeforeCellEditorDestroy.subscribe(function(t,e){}),t.onCellChange.subscribe(function(i,a){var o=t.getColumns()[a.cell].field,n=a.item[o],s=e.dataSetRowTofind(t.getDataItem(a.row)._dataSetRow);e.set(s,o,n)}),t.onSort.subscribe(function(i,a){for(var o=a.sortCol.field,n=t.getSortColumns(),s=!0,r=0;r<n.length;r++)if(n[r].columnId==o){s=n[r].sortAsc;break}e.sort(o,s)}),a.onPasteCells.subscribe(function(i,a){for(var o=t.getData(),n=t.getColumns(),s=a.ranges[0],r=s.fromCell,l=s.toCell,d=s.fromRow,h=s.toRow,u=[],c=r;c<=l;c++)u[u.length]=n[c].field;for(var c=d;c<=h;c++)if(o[c]){var f=o[c],g=e.dataSetRowTofind(f._dataSetRow);for(var v in u)e.set(g,u[v],f[u[v]])}})},detach:function(){},drow:function(t){var e=this.grid,i=this.dataSet.view();this.dataSet,this.isdrow=!1,new Date().getTime();for(var a=[],o=null,n=null,s=0;s<i.length;s++)(o=(n=i[s]).get())._dataSetRow=n,a[a.length]=o;e.setData(a),e.render()},sort:function(t){var e=this.grid,i=this.dataSet.view();this.dataSet,this.isdrow=!1,new Date().getTime();for(var a=e.getData(),o=[],n=null,s=null,r=0;r<i.length;r++){s=i[r];for(var l=0;l<a.length&&s!=a[l]._dataSetRow;l++);(n=$.extend(a[l],s.get()))._dataSetRow=s,o[o.length]=n}e.setData(o),e.render()},posDrow:function(t,e,i){var a=this.grid,o=a.getActiveCell(),n=null==o?-1:o.cell,s=null==o?-1:o.row;if(void 0===e){if(t<0)this._oldRowId=null,a.resetActiveCell(),a.setSelectedRows([]);else for(var r=this.dataSet.view()[t],l=a.getData(),d=0;d<l.length;d++)if(l[d]._dataSetRow==r){$.extend(l[d],r.get()),a.updateRow(d),s!=d&&(a.setActiveCell(d,n),a.setSelectedRows([d]));return}}else for(var r=this.dataSet.view()[t],l=a.getData(),d=0;d<l.length;d++)if(l[d]._dataSetRow==r){i=""===i?null:i,l[d][e]=i,a.updateRow(d),s!=d&&(a.setActiveCell(d,n),a.setSelectedRows([d]));return}},posAdd:function(t,e,i){var a=this.grid,o=a.getData();if(0!=t&&void 0===i){var n=e.get();n._dataSetRow=e,o.push(n),a.invalidateRow(o.length),a.updateRowCount(),a.render();return}var s=t,n=e.get();for(n._dataSetRow=e,o.splice(s,0,n);s<o.length;)a.invalidateRow(s),s++;a.updateRowCount(),a.render()},posDel:function(t,e){for(var i=this.grid,a=i.getData(),o=0;o<a.length;o++)if(a[o]._dataSetRow==e){for(i.resetActiveCell(),a.remove(o);o<a.length;)i.invalidateRow(o),o++;i.updateRowCount(),i.render();return}},_setPosition:function(t){var e=this.grid,i=this.dataSet,a=this.dataSet.view(),o=void 0===t?e.getSelectedRows()[0]:t;if(null==o)i.setPosition(-1);else{var n=e.getDataItem(o)._dataSetRow;i.getPosition()!=a.indexOf(n)&&i.setPosition(a.indexOf(n))}},_setSave:function(){this.grid.getEditController().commitCurrentEdit()}},DataSet.Bind.Ax5Grid=function(t,e,i){this.grid=this.obj=t,this.dataSet=e,t.setData(e)},DataSet.Bind.Ax5Grid.isBind=function(t){try{if("grid"==t.name)return!0}catch(e){}return!1},DataSet.Bind.Ax5Grid.prototype={equals:function(t){try{return this.obj.get(0)==t.get(0)}catch(e){return!1}},attach:function(){},detach:function(){},drow:function(t){this.grid.repaint()},sort:function(t){t!==this.grid&&this.grid.repaint()},posDrow:function(t,e,i,a){var o=this.grid;a!==this.grid&&(void 0===e?o.moveFocus(t):o.setValue(t,e,i))},posAdd:function(t,e,i){this.grid.addRow(this.dataSet.getViewAll()[t],t,{bind:!0})},posDel:function(t,e){this.grid.removeRow(t,{bind:!0})},_setPosition:function(t){},_setSave:function(){this.grid}};